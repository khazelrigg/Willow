var data = {"The Invisible Man" :{"children":[{"children":[{"children":[{"size":8012,"name":"Noun, singular or mass","description":"Noun, singular or mass"}],"name":"Noun, singular or mass","description":"Noun, singular or mass"},{"children":[{"size":2102,"name":"Proper noun, singular","description":"Proper noun, singular"}],"name":"Proper noun, singular","description":"Proper noun, singular"},{"children":[{"size":2002,"name":"Noun, plural","description":"Noun, plural"}],"name":"Noun, plural","description":"Noun, plural"},{"children":[{"size":22,"name":"Proper noun, plural","description":"Proper noun, plural"}],"name":"Proper noun, plural","description":"Proper noun, plural"}],"name":"Nouns","description":"Nouns"},{"children":[{"children":[{"size":4527,"name":"Verb, past tense","description":"Verb, past tense"}],"name":"Verb, past tense","description":"Verb, past tense"},{"children":[{"size":1787,"name":"Verb, base form","description":"Verb, base form"}],"name":"Verb, base form","description":"Verb, base form"},{"children":[{"size":1251,"name":"Verb, past participle","description":"Verb, past participle"}],"name":"Verb, past participle","description":"Verb, past participle"},{"children":[{"size":1217,"name":"Verb, gerund or present participle","description":"Verb, gerund or present participle"}],"name":"Verb, gerund or present participle","description":"Verb, gerund or present participle"},{"children":[{"size":785,"name":"Verb, non-3rd person singular present","description":"Verb, non-3rd person singular present"}],"name":"Verb, non-3rd person singular present","description":"Verb, non-3rd person singular present"},{"children":[{"size":665,"name":"Verb, 3rd person singular present","description":"Verb, 3rd person singular present"}],"name":"Verb, 3rd person singular present","description":"Verb, 3rd person singular present"}],"name":"Verbs","description":"Verbs"},{"children":[{"children":[{"size":3147,"name":"Adverb","description":"Adverb"}],"name":"Adverb","description":"Adverb"},{"children":[{"size":18,"name":"Adverb, superlative","description":"Adverb, superlative"}],"name":"Adverb, superlative","description":"Adverb, superlative"}],"name":"Adverbs","description":"Adverbs"},{"children":[{"children":[{"size":3362,"name":"Adjective","description":"Adjective"}],"name":"Adjective","description":"Adjective"},{"children":[{"size":98,"name":"Adjective, comparative","description":"Adjective, comparative"}],"name":"Adjective, comparative","description":"Adjective, comparative"},{"children":[{"size":47,"name":"Adjective, superlative","description":"Adjective, superlative"}],"name":"Adjective, superlative","description":"Adjective, superlative"}],"name":"Adjectives","description":"Adjectives"},{"children":[{"children":[{"size":4257,"name":"Personal pronoun","description":"Personal pronoun"}],"name":"Personal pronoun","description":"Personal pronoun"},{"children":[{"size":1219,"name":"Possessive pronoun","description":"Possessive pronoun"}],"name":"Possessive pronoun","description":"Possessive pronoun"},{"children":[{"size":209,"name":"Wh-pronoun","description":"Wh-pronoun"}],"name":"Wh-pronoun","description":"Wh-pronoun"},{"children":[{"size":4,"name":"Possessive wh pronoun","description":"Possessive wh pronoun"}],"name":"Possessive wh pronoun","description":"Possessive wh pronoun"}],"name":"Pronouns","description":"Pronouns"},{"children":[{"children":[{"size":6064,"name":"Determiner","description":"Determiner"}],"name":"Determiner","description":"Determiner"},{"children":[{"size":6014,"name":"Preposition or subordinating conjunction","description":"Preposition or subordinating conjunction"}],"name":"Preposition or subordinating conjunction","description":"Preposition or subordinating conjunction"},{"children":[{"size":2620,"name":"Coordinating conjunction","description":"Coordinating conjunction"}],"name":"Coordinating conjunction","description":"Coordinating conjunction"},{"children":[{"size":1070,"name":"to","description":"to"}],"name":"to","description":"to"},{"children":[{"size":628,"name":"Modal","description":"Modal"}],"name":"Modal","description":"Modal"},{"children":[{"size":499,"name":"Cardinal number","description":"Cardinal number"}],"name":"Cardinal number","description":"Cardinal number"},{"children":[{"size":410,"name":"Particle","description":"Particle"}],"name":"Particle","description":"Particle"},{"children":[{"size":206,"name":"Possessive ending","description":"Possessive ending"}],"name":"Possessive ending","description":"Possessive ending"},{"children":[{"size":169,"name":"Wh-determiner","description":"Wh-determiner"}],"name":"Wh-determiner","description":"Wh-determiner"},{"children":[{"size":161,"name":"Existential there","description":"Existential there"}],"name":"Existential there","description":"Existential there"},{"children":[{"size":71,"name":"Predeterminer","description":"Predeterminer"}],"name":"Predeterminer","description":"Predeterminer"},{"children":[{"size":70,"name":"Interjection","description":"Interjection"}],"name":"Interjection","description":"Interjection"},{"children":[{"size":25,"name":"Foreign word","description":"Foreign word"}],"name":"Foreign word","description":"Foreign word"},{"children":[{"size":22,"name":"List item marker","description":"List item marker"}],"name":"List item marker","description":"List item marker"},{"children":[{"size":10,"name":"Symbol","description":"Symbol"}],"name":"Symbol","description":"Symbol"}],"name":"Other","description":"Other"}],"name":"The Invisible Man by H. G. Wells","description":"Parts of Speech"},
"Dracula": {"children":[{"children":[{"children":[{"size":20365,"name":"Noun, singular or mass","description":"Noun, singular or mass"}],"name":"Noun, singular or mass","description":"Noun, singular or mass"},{"children":[{"size":5523,"name":"Proper noun, singular","description":"Proper noun, singular"}],"name":"Proper noun, singular","description":"Proper noun, singular"},{"children":[{"size":4598,"name":"Noun, plural","description":"Noun, plural"}],"name":"Noun, plural","description":"Noun, plural"},{"children":[{"size":68,"name":"Proper noun, plural","description":"Proper noun, plural"}],"name":"Proper noun, plural","description":"Proper noun, plural"}],"name":"Nouns","description":"Nouns"},{"children":[{"children":[{"size":10767,"name":"Verb, past tense","description":"Verb, past tense"}],"name":"Verb, past tense","description":"Verb, past tense"},{"children":[{"size":7993,"name":"Verb, base form","description":"Verb, base form"}],"name":"Verb, base form","description":"Verb, base form"},{"children":[{"size":3772,"name":"Verb, non-3rd person singular present","description":"Verb, non-3rd person singular present"}],"name":"Verb, non-3rd person singular present","description":"Verb, non-3rd person singular present"},{"children":[{"size":3517,"name":"Verb, past participle","description":"Verb, past participle"}],"name":"Verb, past participle","description":"Verb, past participle"},{"children":[{"size":2689,"name":"Verb, 3rd person singular present","description":"Verb, 3rd person singular present"}],"name":"Verb, 3rd person singular present","description":"Verb, 3rd person singular present"},{"children":[{"size":2362,"name":"Verb, gerund or present participle","description":"Verb, gerund or present participle"}],"name":"Verb, gerund or present participle","description":"Verb, gerund or present participle"}],"name":"Verbs","description":"Verbs"},{"children":[{"children":[{"size":11000,"name":"Adverb","description":"Adverb"}],"name":"Adverb","description":"Adverb"},{"children":[{"size":59,"name":"Adverb, superlative","description":"Adverb, superlative"}],"name":"Adverb, superlative","description":"Adverb, superlative"}],"name":"Adverbs","description":"Adverbs"},{"children":[{"children":[{"size":9529,"name":"Adjective","description":"Adjective"}],"name":"Adjective","description":"Adjective"},{"children":[{"size":414,"name":"Adjective, comparative","description":"Adjective, comparative"}],"name":"Adjective, comparative","description":"Adjective, comparative"},{"children":[{"size":174,"name":"Adjective, superlative","description":"Adjective, superlative"}],"name":"Adjective, superlative","description":"Adjective, superlative"}],"name":"Adjectives","description":"Adjectives"},{"children":[{"children":[{"size":17856,"name":"Personal pronoun","description":"Personal pronoun"}],"name":"Personal pronoun","description":"Personal pronoun"},{"children":[{"size":4634,"name":"Possessive pronoun","description":"Possessive pronoun"}],"name":"Possessive pronoun","description":"Possessive pronoun"},{"children":[{"size":751,"name":"Wh-pronoun","description":"Wh-pronoun"}],"name":"Wh-pronoun","description":"Wh-pronoun"},{"children":[{"size":30,"name":"Possessive wh pronoun","description":"Possessive wh pronoun"}],"name":"Possessive wh pronoun","description":"Possessive wh pronoun"}],"name":"Pronouns","description":"Pronouns"},{"children":[{"children":[{"size":20259,"name":"Preposition or subordinating conjunction","description":"Preposition or subordinating conjunction"}],"name":"Preposition or subordinating conjunction","description":"Preposition or subordinating conjunction"},{"children":[{"size":14860,"name":"Determiner","description":"Determiner"}],"name":"Determiner","description":"Determiner"},{"children":[{"size":7550,"name":"Coordinating conjunction","description":"Coordinating conjunction"}],"name":"Coordinating conjunction","description":"Coordinating conjunction"},{"children":[{"size":4472,"name":"to","description":"to"}],"name":"to","description":"to"},{"children":[{"size":3582,"name":"Modal","description":"Modal"}],"name":"Modal","description":"Modal"},{"children":[{"size":1378,"name":"Cardinal number","description":"Cardinal number"}],"name":"Cardinal number","description":"Cardinal number"},{"children":[{"size":1002,"name":"Wh-determiner","description":"Wh-determiner"}],"name":"Wh-determiner","description":"Wh-determiner"},{"children":[{"size":981,"name":"Particle","description":"Particle"}],"name":"Particle","description":"Particle"},{"children":[{"size":767,"name":"Symbol","description":"Symbol"}],"name":"Symbol","description":"Symbol"},{"children":[{"size":687,"name":"Possessive ending","description":"Possessive ending"}],"name":"Possessive ending","description":"Possessive ending"},{"children":[{"size":677,"name":"Existential there","description":"Existential there"}],"name":"Existential there","description":"Existential there"},{"children":[{"size":291,"name":"Predeterminer","description":"Predeterminer"}],"name":"Predeterminer","description":"Predeterminer"},{"children":[{"size":250,"name":"Interjection","description":"Interjection"}],"name":"Interjection","description":"Interjection"},{"children":[{"size":66,"name":"Foreign word","description":"Foreign word"}],"name":"Foreign word","description":"Foreign word"},{"children":[{"size":3,"name":"List item marker","description":"List item marker"}],"name":"List item marker","description":"List item marker"}],"name":"Other","description":"Other"}],"name":"Dracula by Bram Stoker","description":"Parts of speech for Dracula by Bram Stoker"},
"2 B R 0 2 B":{"children":[{"children":[{"children":[{"size":360,"name":"Noun, singular or mass","description":"Noun, singular or mass"}],"name":"Noun, singular or mass","description":"Noun, singular or mass"},{"children":[{"size":157,"name":"Proper noun, singular","description":"Proper noun, singular"}],"name":"Proper noun, singular","description":"Proper noun, singular"},{"children":[{"size":111,"name":"Noun, plural","description":"Noun, plural"}],"name":"Noun, plural","description":"Noun, plural"},{"children":[{"size":1,"name":"Proper noun, plural","description":"Proper noun, plural"}],"name":"Proper noun, plural","description":"Proper noun, plural"}],"name":"Nouns","description":"Nouns"},{"children":[{"children":[{"size":239,"name":"Verb, past tense","description":"Verb, past tense"}],"name":"Verb, past tense","description":"Verb, past tense"},{"children":[{"size":119,"name":"Verb, base form","description":"Verb, base form"}],"name":"Verb, base form","description":"Verb, base form"},{"children":[{"size":66,"name":"Verb, non-3rd person singular present","description":"Verb, non-3rd person singular present"}],"name":"Verb, non-3rd person singular present","description":"Verb, non-3rd person singular present"},{"children":[{"size":56,"name":"Verb, past participle","description":"Verb, past participle"}],"name":"Verb, past participle","description":"Verb, past participle"},{"children":[{"size":44,"name":"Verb, 3rd person singular present","description":"Verb, 3rd person singular present"}],"name":"Verb, 3rd person singular present","description":"Verb, 3rd person singular present"},{"children":[{"size":41,"name":"Verb, gerund or present participle","description":"Verb, gerund or present participle"}],"name":"Verb, gerund or present participle","description":"Verb, gerund or present participle"}],"name":"Verbs","description":"Verbs"},{"children":[{"children":[{"size":152,"name":"Adverb","description":"Adverb"}],"name":"Adverb","description":"Adverb"}],"name":"Adverbs","description":"Adverbs"},{"children":[{"children":[{"size":170,"name":"Adjective","description":"Adjective"}],"name":"Adjective","description":"Adjective"},{"children":[{"size":7,"name":"Adjective, comparative","description":"Adjective, comparative"}],"name":"Adjective, comparative","description":"Adjective, comparative"},{"children":[{"size":1,"name":"Adjective, superlative","description":"Adjective, superlative"}],"name":"Adjective, superlative","description":"Adjective, superlative"}],"name":"Adjectives","description":"Adjectives"},{"children":[{"children":[{"size":249,"name":"Personal pronoun","description":"Personal pronoun"}],"name":"Personal pronoun","description":"Personal pronoun"},{"children":[{"size":50,"name":"Possessive pronoun","description":"Possessive pronoun"}],"name":"Possessive pronoun","description":"Possessive pronoun"},{"children":[{"size":24,"name":"Wh-pronoun","description":"Wh-pronoun"}],"name":"Wh-pronoun","description":"Wh-pronoun"},{"children":[{"size":3,"name":"Possessive wh pronoun","description":"Possessive wh pronoun"}],"name":"Possessive wh pronoun","description":"Possessive wh pronoun"}],"name":"Pronouns","description":"Pronouns"},{"children":[{"children":[{"size":285,"name":"Determiner","description":"Determiner"}],"name":"Determiner","description":"Determiner"},{"children":[{"size":247,"name":"Preposition or subordinating conjunction","description":"Preposition or subordinating conjunction"}],"name":"Preposition or subordinating conjunction","description":"Preposition or subordinating conjunction"},{"children":[{"size":65,"name":"to","description":"to"}],"name":"to","description":"to"},{"children":[{"size":62,"name":"Coordinating conjunction","description":"Coordinating conjunction"}],"name":"Coordinating conjunction","description":"Coordinating conjunction"},{"children":[{"size":52,"name":"Cardinal number","description":"Cardinal number"}],"name":"Cardinal number","description":"Cardinal number"},{"children":[{"size":33,"name":"Modal","description":"Modal"}],"name":"Modal","description":"Modal"},{"children":[{"size":25,"name":"Symbol","description":"Symbol"}],"name":"Symbol","description":"Symbol"},{"children":[{"size":16,"name":"Particle","description":"Particle"}],"name":"Particle","description":"Particle"},{"children":[{"size":9,"name":"Interjection","description":"Interjection"}],"name":"Interjection","description":"Interjection"},{"children":[{"size":7,"name":"Wh-determiner","description":"Wh-determiner"}],"name":"Wh-determiner","description":"Wh-determiner"},{"children":[{"size":6,"name":"Possessive ending","description":"Possessive ending"}],"name":"Possessive ending","description":"Possessive ending"},{"children":[{"size":5,"name":"Predeterminer","description":"Predeterminer"}],"name":"Predeterminer","description":"Predeterminer"},{"children":[{"size":5,"name":"Existential there","description":"Existential there"}],"name":"Existential there","description":"Existential there"}],"name":"Other","description":"Other"}],"name":"2 B R 0 2 B by Kurt Vonnegut","description":"Parts of speech for 2 B R 0 2 B by Kurt Vonnegut"},
"Alice has Adventures in Wonderland":{"children":[{"children":[{"children":[{"size":2879,"name":"Noun, singular or mass","description":"Noun, singular or mass"}],"name":"Noun, singular or mass","description":"Noun, singular or mass"},{"children":[{"size":1312,"name":"Proper noun, singular","description":"Proper noun, singular"}],"name":"Proper noun, singular","description":"Proper noun, singular"},{"children":[{"size":697,"name":"Noun, plural","description":"Noun, plural"}],"name":"Noun, plural","description":"Noun, plural"},{"children":[{"size":12,"name":"Proper noun, plural","description":"Proper noun, plural"}],"name":"Proper noun, plural","description":"Proper noun, plural"}],"name":"Nouns","description":"Nouns"},{"children":[{"children":[{"size":2396,"name":"Verb, past tense","description":"Verb, past tense"}],"name":"Verb, past tense","description":"Verb, past tense"},{"children":[{"size":1286,"name":"Verb, base form","description":"Verb, base form"}],"name":"Verb, base form","description":"Verb, base form"},{"children":[{"size":632,"name":"Verb, non-3rd person singular present","description":"Verb, non-3rd person singular present"}],"name":"Verb, non-3rd person singular present","description":"Verb, non-3rd person singular present"},{"children":[{"size":601,"name":"Verb, gerund or present participle","description":"Verb, gerund or present participle"}],"name":"Verb, gerund or present participle","description":"Verb, gerund or present participle"},{"children":[{"size":424,"name":"Verb, past participle","description":"Verb, past participle"}],"name":"Verb, past participle","description":"Verb, past participle"},{"children":[{"size":383,"name":"Verb, 3rd person singular present","description":"Verb, 3rd person singular present"}],"name":"Verb, 3rd person singular present","description":"Verb, 3rd person singular present"}],"name":"Verbs","description":"Verbs"},{"children":[{"children":[{"size":2215,"name":"Adverb","description":"Adverb"}],"name":"Adverb","description":"Adverb"},{"children":[{"size":7,"name":"Adverb, superlative","description":"Adverb, superlative"}],"name":"Adverb, superlative","description":"Adverb, superlative"}],"name":"Adverbs","description":"Adverbs"},{"children":[{"children":[{"size":1400,"name":"Adjective","description":"Adjective"}],"name":"Adjective","description":"Adjective"},{"children":[{"size":65,"name":"Adjective, comparative","description":"Adjective, comparative"}],"name":"Adjective, comparative","description":"Adjective, comparative"},{"children":[{"size":30,"name":"Adjective, superlative","description":"Adjective, superlative"}],"name":"Adjective, superlative","description":"Adjective, superlative"}],"name":"Adjectives","description":"Adjectives"},{"children":[{"children":[{"size":2780,"name":"Personal pronoun","description":"Personal pronoun"}],"name":"Personal pronoun","description":"Personal pronoun"},{"children":[{"size":527,"name":"Possessive pronoun","description":"Possessive pronoun"}],"name":"Possessive pronoun","description":"Possessive pronoun"},{"children":[{"size":191,"name":"Wh-pronoun","description":"Wh-pronoun"}],"name":"Wh-pronoun","description":"Wh-pronoun"},{"children":[{"size":2,"name":"Possessive wh pronoun","description":"Possessive wh pronoun"}],"name":"Possessive wh pronoun","description":"Possessive wh pronoun"}],"name":"Pronouns","description":"Pronouns"},{"children":[{"children":[{"size":2949,"name":"Determiner","description":"Determiner"}],"name":"Determiner","description":"Determiner"},{"children":[{"size":2894,"name":"Preposition or subordinating conjunction","description":"Preposition or subordinating conjunction"}],"name":"Preposition or subordinating conjunction","description":"Preposition or subordinating conjunction"},{"children":[{"size":1132,"name":"Coordinating conjunction","description":"Coordinating conjunction"}],"name":"Coordinating conjunction","description":"Coordinating conjunction"},{"children":[{"size":725,"name":"to","description":"to"}],"name":"to","description":"to"},{"children":[{"size":524,"name":"Modal","description":"Modal"}],"name":"Modal","description":"Modal"},{"children":[{"size":242,"name":"Particle","description":"Particle"}],"name":"Particle","description":"Particle"},{"children":[{"size":241,"name":"Cardinal number","description":"Cardinal number"}],"name":"Cardinal number","description":"Cardinal number"},{"children":[{"size":123,"name":"Wh-determiner","description":"Wh-determiner"}],"name":"Wh-determiner","description":"Wh-determiner"},{"children":[{"size":94,"name":"Interjection","description":"Interjection"}],"name":"Interjection","description":"Interjection"},{"children":[{"size":90,"name":"Existential there","description":"Existential there"}],"name":"Existential there","description":"Existential there"},{"children":[{"size":70,"name":"Possessive ending","description":"Possessive ending"}],"name":"Possessive ending","description":"Possessive ending"},{"children":[{"size":63,"name":"Symbol","description":"Symbol"}],"name":"Symbol","description":"Symbol"},{"children":[{"size":53,"name":"Predeterminer","description":"Predeterminer"}],"name":"Predeterminer","description":"Predeterminer"},{"children":[{"size":12,"name":"Foreign word","description":"Foreign word"}],"name":"Foreign word","description":"Foreign word"},{"children":[{"size":3,"name":"List item marker","description":"List item marker"}],"name":"List item marker","description":"List item marker"}],"name":"Other","description":"Other"}],"name":"Alice\u2019s Adventures in Wonderland by Lewis Carroll","description":"Parts of speech for Alice's Adventures in Wonderland by Lewis Carroll"},
"The Time Machine":{"children":[{"children":[{"children":[{"size":5165,"name":"Noun, singular or mass","description":"Noun, singular or mass"}],"name":"Noun, singular or mass","description":"Noun, singular or mass"},{"children":[{"size":1451,"name":"Noun, plural","description":"Noun, plural"}],"name":"Noun, plural","description":"Noun, plural"},{"children":[{"size":746,"name":"Proper noun, singular","description":"Proper noun, singular"}],"name":"Proper noun, singular","description":"Proper noun, singular"},{"children":[{"size":64,"name":"Proper noun, plural","description":"Proper noun, plural"}],"name":"Proper noun, plural","description":"Proper noun, plural"}],"name":"Nouns","description":"Nouns"},{"children":[{"children":[{"size":2867,"name":"Verb, past tense","description":"Verb, past tense"}],"name":"Verb, past tense","description":"Verb, past tense"},{"children":[{"size":1058,"name":"Verb, base form","description":"Verb, base form"}],"name":"Verb, base form","description":"Verb, base form"},{"children":[{"size":882,"name":"Verb, past participle","description":"Verb, past participle"}],"name":"Verb, past participle","description":"Verb, past participle"},{"children":[{"size":713,"name":"Verb, gerund or present participle","description":"Verb, gerund or present participle"}],"name":"Verb, gerund or present participle","description":"Verb, gerund or present participle"},{"children":[{"size":393,"name":"Verb, non-3rd person singular present","description":"Verb, non-3rd person singular present"}],"name":"Verb, non-3rd person singular present","description":"Verb, non-3rd person singular present"},{"children":[{"size":291,"name":"Verb, 3rd person singular present","description":"Verb, 3rd person singular present"}],"name":"Verb, 3rd person singular present","description":"Verb, 3rd person singular present"}],"name":"Verbs","description":"Verbs"},{"children":[{"children":[{"size":2203,"name":"Adverb","description":"Adverb"}],"name":"Adverb","description":"Adverb"},{"children":[{"size":14,"name":"Adverb, superlative","description":"Adverb, superlative"}],"name":"Adverb, superlative","description":"Adverb, superlative"}],"name":"Adverbs","description":"Adverbs"},{"children":[{"children":[{"size":2835,"name":"Adjective","description":"Adjective"}],"name":"Adjective","description":"Adjective"},{"children":[{"size":100,"name":"Adjective, comparative","description":"Adjective, comparative"}],"name":"Adjective, comparative","description":"Adjective, comparative"},{"children":[{"size":47,"name":"Adjective, superlative","description":"Adjective, superlative"}],"name":"Adjective, superlative","description":"Adjective, superlative"}],"name":"Adjectives","description":"Adjectives"},{"children":[{"children":[{"size":2849,"name":"Personal pronoun","description":"Personal pronoun"}],"name":"Personal pronoun","description":"Personal pronoun"},{"children":[{"size":861,"name":"Possessive pronoun","description":"Possessive pronoun"}],"name":"Possessive pronoun","description":"Possessive pronoun"},{"children":[{"size":103,"name":"Wh-pronoun","description":"Wh-pronoun"}],"name":"Wh-pronoun","description":"Wh-pronoun"},{"children":[{"size":5,"name":"Possessive wh pronoun","description":"Possessive wh pronoun"}],"name":"Possessive wh pronoun","description":"Possessive wh pronoun"}],"name":"Pronouns","description":"Pronouns"},{"children":[{"children":[{"size":4723,"name":"Preposition or subordinating conjunction","description":"Preposition or subordinating conjunction"}],"name":"Preposition or subordinating conjunction","description":"Preposition or subordinating conjunction"},{"children":[{"size":4225,"name":"Determiner","description":"Determiner"}],"name":"Determiner","description":"Determiner"},{"children":[{"size":1705,"name":"Coordinating conjunction","description":"Coordinating conjunction"}],"name":"Coordinating conjunction","description":"Coordinating conjunction"},{"children":[{"size":763,"name":"to","description":"to"}],"name":"to","description":"to"},{"children":[{"size":434,"name":"Modal","description":"Modal"}],"name":"Modal","description":"Modal"},{"children":[{"size":323,"name":"Cardinal number","description":"Cardinal number"}],"name":"Cardinal number","description":"Cardinal number"},{"children":[{"size":193,"name":"Wh-determiner","description":"Wh-determiner"}],"name":"Wh-determiner","description":"Wh-determiner"},{"children":[{"size":162,"name":"Particle","description":"Particle"}],"name":"Particle","description":"Particle"},{"children":[{"size":101,"name":"Existential there","description":"Existential there"}],"name":"Existential there","description":"Existential there"},{"children":[{"size":58,"name":"Possessive ending","description":"Possessive ending"}],"name":"Possessive ending","description":"Possessive ending"},{"children":[{"size":49,"name":"Predeterminer","description":"Predeterminer"}],"name":"Predeterminer","description":"Predeterminer"},{"children":[{"size":21,"name":"List item marker","description":"List item marker"}],"name":"List item marker","description":"List item marker"},{"children":[{"size":13,"name":"Interjection","description":"Interjection"}],"name":"Interjection","description":"Interjection"},{"children":[{"size":1,"name":"Foreign word","description":"Foreign word"}],"name":"Foreign word","description":"Foreign word"}],"name":"Other","description":"Other"}],"name":"The Time Machine by H. G. (Herbert George) Wells","description":"Parts of speech for The Time Machine by H. G. (Herbert George) Wells"}
}

console.log("Loaded main.js");

// D3 Script for Bi-level partition
function drawChart(title) {
    d3.select("#d3_SVG").remove();

    var margin = {top: 260, right: 260, bottom: 260, left: 260},
        radius = Math.min(margin.top, margin.right, margin.bottom, margin.left) - 10;

    function filter_min_arc_size_text(d, i) {return (d.dx*d.depth*radius/3)>14};

    var hue = d3.scale.category10();

    var luminance = d3.scale.sqrt()
        .domain([0, 1e6])
        .clamp(true)
        .range([90, 20]);

    var svg = d3.select("#chart").append("svg")
        .attr("id", "d3_SVG")
        .attr("width", margin.left + margin.right)
        .attr("height", margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var partition = d3.layout.partition()
        .sort(function(a, b) { return d3.ascending(a.name, b.name); })
        .size([2 * Math.PI, radius]);

    var arc = d3.svg.arc()
        .startAngle(function(d) { return d.x; })
        .endAngle(function(d) { return d.x + d.dx - .01 / (d.depth + .5); })
        .innerRadius(function(d) { return radius / 3 * d.depth; })
        .outerRadius(function(d) { return radius / 3 * (d.depth + 1) - 1; });

    //Tooltip description
    var tooltip = d3.select("body")
        .append("div")
        .attr("id", "tooltip")
        .style("position", "absolute")
        .style("z-index", "10")
        .style("opacity", 0);

    function format_number(x) {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    function format_description(d) {
        var description = d.description;
        return   '<b>' + d.name  + '</b><br>(' + format_number(d.value) + ')';
    }

    function mouseOverArc(d) {
        d3.select(this).attr("stroke","black");

        tooltip.html(format_description(d));
        return tooltip.transition()
            .duration(50)
            .style("opacity", 0.9);
    }

    function mouseOutArc(){
        d3.select(this).attr("stroke","")
        return tooltip.style("opacity", 0);
    }

    function mouseMoveArc (d) {
        return tooltip
            .style("top", (d3.event.pageY-10)+"px")
            .style("left", (d3.event.pageX+10)+"px");
    }

    var root_ = null;
    root = data[title];

    if (root == null) {
        console.log("Missing data for " + title);
    }

    // Compute the initial layout on the entire tree to sum sizes.
    // Also compute the full name and fill color for each node,
    // and stash the children so they can be restored as we descend.

    partition
        .value(function(d) { return d.size; })
        .nodes(root)
        .forEach(function(d) {
            d._children = d.children;
            d.sum = d.value;
            d.key = key(d);
            d.fill = fill(d);
        });

    // Now redefine the value function to use the previously-computed sum.
    partition
        .children(function(d, depth) { return depth < 2 ? d._children : null; })
        .value(function(d) { return d.sum; });

    var center = svg.append("circle")
        .attr("r", radius / 3)
        .on("click", zoomOut);

    center.append("title")
        .text("Zoom out one level");

    var partitioned_data=partition.nodes(root).slice(1);

    var path = svg.selectAll("path")
        .data(partitioned_data)
        .enter().append("path")
        .attr("d", arc)
        .style("fill", function(d) { return d.fill; })
        .each(function(d) { this._current = updateArc(d); })
        .on("click", zoomIn)
        .on("mouseover", mouseOverArc)
        .on("mousemove", mouseMoveArc)
        .on("mouseout", mouseOutArc);


    var texts = svg.selectAll("text")
        .data(partitioned_data)
       // .enter().append("text")
        .filter(filter_min_arc_size_text)
        .attr("transform", function(d) { return "rotate(" + computeTextRotation(d) + ")"; })
        .attr("x", function(d) { return radius / 3 * d.depth; })
        .attr("dx", "6") // margin
        .attr("dy", ".35em") // vertical-align
        .text(function(d,i) {return d.name});

    function zoomIn(p) {
        if (p.depth > 1) p = p.parent;
        if (!p.children) return;
        zoom(p, p);
    }

    function zoomOut(p) {
        if (!p.parent) return;
        zoom(p.parent, p);
    }

    // Zoom to the specified new root.
    function zoom(root, p) {
        if (document.documentElement.__transition__) return;

        // Rescale outside angles to match the new layout.
        var enterArc,
            exitArc,
            outsideAngle = d3.scale.linear().domain([0, 2 * Math.PI]);

        function insideArc(d) {
            return p.key > d.key
                ? {depth: d.depth - 1, x: 0, dx: 0} : p.key < d.key
                ? {depth: d.depth - 1, x: 2 * Math.PI, dx: 0}
                : {depth: 0, x: 0, dx: 2 * Math.PI};
        }

        function outsideArc(d) {
            return {depth: d.depth + 1, x: outsideAngle(d.x), dx: outsideAngle(d.x + d.dx) - outsideAngle(d.x)};
        }

        center.datum(root);

        // When zooming in, arcs enter from the outside and exit to the inside.
        // Entering outside arcs start from the old layout.
        if (root === p) enterArc = outsideArc, exitArc = insideArc, outsideAngle.range([p.x, p.x + p.dx]);

        var new_data=partition.nodes(root).slice(1);
        console.log("NEW DATA: " + new_data);

        path = path.data(new_data, function(d) { return d.key; });
        console.log("PATH: " + path);

        // When zooming out, arcs enter from the inside and exit to the outside.
        // Exiting outside arcs transition to the new layout.
        if (root !== p) enterArc = insideArc, exitArc = outsideArc, outsideAngle.range([p.x, p.x + p.dx]);

        d3.transition().duration(d3.event.altKey ? 7500 : 750).each(function() {
            path.exit().transition()
                .style("fill-opacity", function(d) { return d.depth === 1 + (root === p) ? 1 : 0; })
                .attrTween("d", function(d) { return arcTween.call(this, exitArc(d)); })
                .remove();

            path.enter().append("path")
                .style("fill-opacity", function(d) { return d.depth === 2 - (root === p) ? 1 : 0; })
                .style("fill", function(d) { return d.fill; })
                .on("click", zoomIn)
                .on("mouseover", mouseOverArc)
                .on("mousemove", mouseMoveArc)
                .on("mouseout", mouseOutArc)
                .each(function(d) { this._current = enterArc(d); });

            path.transition()
                .style("fill-opacity", 1)
                .attrTween("d", function(d) { return arcTween.call(this, updateArc(d)); });
        });
    }

    function key(d) {
        var k = [], p = d;
        while (p.depth) k.push(p.name), p = p.parent;
        return k.reverse().join(".");
    }

    function fill(d) {
        var p = d;
        while (p.depth > 1) p = p.parent;
        var c = d3.lab(hue(p.name));
        c.l = luminance(d.sum);
        return c;
    }

    function arcTween(b) {
        var i = d3.interpolate(this._current, b);
        this._current = i(0);
        return function(t) {
            return arc(i(t));
        };
    }

    function updateArc(d) {
        return {depth: d.depth, x: d.x, dx: d.dx};
    }
    d3.select(self.frameElement).style("height", margin.top + margin.bottom + "px");
}


function updateBook(title) {
   // Update page
    $('#titleHeader').text(title);
    $('#tooltip').remove();
    drawChart(title);
}

// Update on click of list item
$(function() {
  updateBook($('#book-list a').eq(0).text());

  $('#book-list a').click( function(e) {
    document.title = $(this).text() + " Results - Kameron Hazelrigg";
    console.log("Updating to " + $(this).text());
    // Switch active list item by removing currently active and adding class
    $('#book-list a.active').removeClass('active');
    if (!$(this).hasClass('active')) {
        $(this).addClass('active');
    }
    e.preventDefault();
    // Update page
    updateBook($(this).text());
  });

});